<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Notes App</title>
    <style>
        body {
            font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: #36393f;
            color: #dcddde;
            margin: 0;
            padding: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        .sidebar {
            width: 250px;
            background-color: #2f3136;
            border-right: 1px solid #202225;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 10px;
            font-weight: bold;
            border-bottom: 1px solid #202225;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .new-folder-btn {
            background-color: #5865f2;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 12px;
        }

        .new-folder-btn:hover {
            background-color: #4752c4;
        }

        .folder {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #202225;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .folder:hover {
            background-color: #40444b;
        }

        .folder-icon {
            margin-right: 10px;
        }

        .delete-btn {
            background: none;
            border: none;
            color: #72767d;
            font-size: 14px;
            cursor: pointer;
            margin-left: 5px;
        }

        .delete-btn:hover {
            color: #f04747;
        }

        .new-file-btn {
            background: none;
            border: none;
            color: #dcddde;
            font-size: 16px;
            cursor: pointer;
        }

        .new-file-btn:hover {
            color: #5865f2;
        }

        .files {
            display: none;
            padding-left: 20px;
        }

        .file {
            padding: 8px;
            cursor: pointer;
            border-bottom: 1px solid #202225;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file:hover {
            background-color: #40444b;
        }

        .file-icon {
            margin-right: 10px;
        }

        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .header {
            background-color: #2f3136;
            padding: 10px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar-toggle {
            display: none;
            background: none;
            border: none;
            color: #dcddde;
            font-size: 20px;
            cursor: pointer;
        }

        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            background-color: #36393f;
        }

        .message {
            background-color: #2f3136;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            max-width: 70%;
            word-wrap: break-word;
            position: relative;
        }

        .message .timestamp {
            font-size: 12px;
            color: #72767d;
            margin-bottom: 5px;
        }

        .message .delete-note-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: none;
            border: none;
            color: #72767d;
            font-size: 16px;
            cursor: pointer;
        }

        .message .delete-note-btn:hover {
            color: #f04747;
        }

        .input-container {
            background-color: #2f3136;
            padding: 10px;
            display: flex;
            align-items: center;
        }

        #note-input {
            flex: 1;
            background-color: #40444b;
            border: none;
            border-radius: 4px;
            padding: 10px;
            color: #dcddde;
            font-size: 14px;
        }

        #note-input::placeholder {
            color: #72767d;
        }

        button {
            background-color: #5865f2;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 10px 15px;
            margin-left: 10px;
            cursor: pointer;
            font-size: 14px;
        }

        button:hover {
            background-color: #4752c4;
        }

        #clear-btn {
            background-color: #f04747;
        }

        #clear-btn:hover {
            background-color: #d84040;
        }

        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }

            .sidebar-toggle {
                display: block;
            }

            .sidebar.show {
                display: flex;
            }
        }
    </style>
</head>

<body>
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            Files & Folders
            <button class="new-folder-btn" id="new-folder-btn">New Folder</button>
        </div>
        <!-- Folders and files will be loaded here -->
    </div>
    <div class="main">
        <div class="header">
            <button class="sidebar-toggle" id="sidebar-toggle">‚ò∞</button>
            Discord Notes - <span id="current-file">Select a file</span>
        </div>
        <div class="chat-container" id="chat-container">
            <!-- Notes will appear here -->
        </div>
        <div class="input-container">
            <input type="text" id="note-input" placeholder="Type your note here...">
            <button id="send-btn">Send</button>
            <button id="clear-btn">Clear All</button>
        </div>
    </div>

    <script>
        const chatContainer = document.getElementById('chat-container');
        const noteInput = document.getElementById('note-input');
        const sendBtn = document.getElementById('send-btn');
        const clearBtn = document.getElementById('clear-btn');
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const newFolderBtn = document.getElementById('new-folder-btn');
        const currentFileSpan = document.getElementById('current-file');
        let currentFile = null;
        let sidebarData = JSON.parse(localStorage.getItem('sidebarData')) || {
            'Personal': ['Notes.txt', 'Ideas.txt'],
            'Work': ['Meetings.txt', 'Tasks.txt']
        };

        // Dummy notes for initial files
        const dummyNotes = {
            'Personal/Notes.txt': [
                { text: 'Remember to buy groceries.', timestamp: '10:00 AM' },
                { text: 'Call mom tomorrow.', timestamp: '10:05 AM' }
            ],
            'Personal/Ideas.txt': [
                { text: 'Idea for a new app.', timestamp: '11:00 AM' }
            ],
            'Work/Meetings.txt': [
                { text: 'Meeting with team at 2 PM.', timestamp: '9:00 AM' }
            ],
            'Work/Tasks.txt': [
                { text: 'Finish report by EOD.', timestamp: '9:30 AM' },
                { text: 'Review code changes.', timestamp: '10:00 AM' }
            ]
        };

        // Load sidebar from data
        function loadSidebar() {
            // Clear existing folders and files
            const existingFolders = sidebar.querySelectorAll('.folder, .files');
            existingFolders.forEach(el => el.remove());

            for (const folder in sidebarData) {
                const folderDiv = document.createElement('div');
                folderDiv.className = 'folder';
                folderDiv.dataset.folder = folder;
                folderDiv.innerHTML = `
                    <span><span class="folder-icon">üìÅ</span> ${folder}</span>
                    <div>
                        <button class="new-file-btn" data-folder="${folder}">+</button>
                        <button class="delete-btn" data-folder="${folder}">√ó</button>
                    </div>
                `;
                sidebar.appendChild(folderDiv);

                const filesDiv = document.createElement('div');
                filesDiv.className = 'files';
                filesDiv.id = `${folder.toLowerCase().replace(/\s/g, '-')}-files`;
                sidebarData[folder].forEach(file => {
                    const fileDiv = document.createElement('div');
                    fileDiv.className = 'file';
                    fileDiv.dataset.file = `${folder}/${file}`;
                    fileDiv.innerHTML = `
                        <span><span class="file-icon">üìÑ</span> ${file}</span>
                        <button class="delete-btn" data-file="${folder}/${file}">√ó</button>
                    `;
                    filesDiv.appendChild(fileDiv);
                });
                sidebar.appendChild(filesDiv);
            }
            attachEventListeners();
        }

        // Attach event listeners for folders and files
        function attachEventListeners() {
            document.querySelectorAll('.folder').forEach(folder => {
                folder.addEventListener('click', (e) => {
                    if (e.target.classList.contains('new-file-btn') || e.target.classList.contains('delete-btn')) return;
                    const folderName = folder.dataset.folder;
                    const filesDiv = document.getElementById(`${folderName.toLowerCase().replace(/\s/g, '-')}-files`);
                    filesDiv.style.display = filesDiv.style.display === 'block' ? 'none' : 'block';
                });
            });

            document.querySelectorAll('.file').forEach(file => {
                file.addEventListener('click', (e) => {
                    if (e.target.classList.contains('delete-btn')) return;
                    const fileName = file.dataset.file;
                    loadNotes(fileName);
                });
            });

            document.querySelectorAll('.new-file-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const folder = e.target.dataset.folder;
                    const fileName = prompt('Enter file name (e.g., MyNotes.txt):');
                    if (fileName && fileName.trim() && !sidebarData[folder].includes(fileName.trim())) {
                        sidebarData[folder].push(fileName.trim());
                        localStorage.setItem('sidebarData', JSON.stringify(sidebarData));
                        loadSidebar();
                    } else if (sidebarData[folder].includes(fileName.trim())) {
                        alert('File name already exists in this folder.');
                    }
                });
            });

            document.querySelectorAll('.delete-btn[data-folder]').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const folder = e.target.dataset.folder;
                    if (sidebarData[folder].length > 0 && !confirm(`Delete folder "${folder}" and all its files/notes?`)) return;
                    delete sidebarData[folder];
                    localStorage.setItem('sidebarData', JSON.stringify(sidebarData));
                    // Remove associated notes from localStorage
                    for (const file of sidebarData[folder] || []) {
                        localStorage.removeItem(`${folder}/${file}`);
                    }
                    loadSidebar();
                    if (currentFile && currentFile.startsWith(`${folder}/`)) {
                        currentFile = null;
                        currentFileSpan.textContent = 'Select a file';
                        chatContainer.innerHTML = '';
                    }
                });
            });

            document.querySelectorAll('.delete-btn[data-file]').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const file = e.target.dataset.file;
                    if (confirm(`Delete file "${file}" and its notes?`)) {
                        const [folder, fileName] = file.split('/');
                        sidebarData[folder] = sidebarData[folder].filter(f => f !== fileName);
                        localStorage.setItem('sidebarData', JSON.stringify(sidebarData));
                        localStorage.removeItem(file);
                        loadSidebar();
                        if (currentFile === file) {
                            currentFile = null;
                            currentFileSpan.textContent = 'Select a file';
                            chatContainer.innerHTML = '';
                        }
                    }
                });
            });
        }

        // Load notes for a file
        function loadNotes(file) {
            chatContainer.innerHTML = '';
            currentFile = file;
            currentFileSpan.textContent = file;
            const notes = JSON.parse(localStorage.getItem(file)) || dummyNotes[file] || [];
            notes.forEach(note => {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message';
                messageDiv.innerHTML = `
                    <button class="delete-note-btn">√ó</button>
                    <div class="timestamp">${note.timestamp}</div>${note.text}
                `;
                chatContainer.appendChild(messageDiv);
            });
            chatContainer.scrollTop = chatContainer.scrollHeight;
            attachNoteDeleteListeners();
        }

        // Attach delete listeners for notes
        function attachNoteDeleteListeners() {
            document.querySelectorAll('.delete-note-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.target.parentElement.remove();
                    saveNotes();
                });
            });
        }

        // Save notes for current file
        function saveNotes() {
            if (!currentFile) return;
            const notes = [];
            Array.from(chatContainer.children).forEach(msg => {
                const timestamp = msg.querySelector('.timestamp').textContent;
                const text = msg.textContent.replace('√ó', '').replace(timestamp, '').trim();
                notes.push({ text, timestamp });
            });
            localStorage.setItem(currentFile, JSON.stringify(notes));
        }

        // New folder
        newFolderBtn.addEventListener('click', () => {
            const folderName = prompt('Enter folder name:');
            if (folderName && folderName.trim() && !sidebarData[folderName.trim()]) {
                sidebarData[folderName.trim()] = [];
                localStorage.setItem('sidebarData', JSON.stringify(sidebarData));
                loadSidebar();
            } else if (sidebarData[folderName.trim()]) {
                alert('Folder name already exists.');
            }
        });

        // Send note
        sendBtn.addEventListener('click', () => {
            if (!currentFile) {
                alert('Please select a file first.');
                return;
            }
            const note = noteInput.value.trim();
            if (note) {
                const timestamp = new Date().toLocaleTimeString();
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message';
                messageDiv.innerHTML = `
                    <button class="delete-note-btn">√ó</button>
                    <div class="timestamp">${timestamp}</div>${note}
                `;
                chatContainer.appendChild(messageDiv);
                noteInput.value = '';
                chatContainer.scrollTop = chatContainer.scrollHeight;
                saveNotes();
                attachNoteDeleteListeners();
            }
        });

        // Clear all
        clearBtn.addEventListener('click', () => {
            if (!currentFile) return;
            chatContainer.innerHTML = '';
            localStorage.removeItem(currentFile);
        });

        // Sidebar toggle for mobile
        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.toggle('show');
        });

        // Enter key
        noteInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendBtn.click();
            }
        });

        // Initialize
        loadSidebar();
    </script>
</body>

</html>